@if (!placedAll) {
  <section @scaleOut class="tier-list-header">
    @if (loadData.areImagesLoaded) {
      <div @slideInFromLeft class="tier-list-info">
        <p>Next up:</p>
        <h3>{{tierlistItems[currentItem].name}}</h3>
      </div>
    }
    @if (loadData.areImagesLoaded) {
      <ul @slideInFromRight>
        <li [dndDraggable]="tierlistItems[currentItem].file_path" dndType="import">
            <img [src]="tierlistItems[currentItem].file_path" alt="">
          <div dndDragImageRef class="drag-preview">
            <img [src]="tierlistItems[currentItem].file_path" alt="">
          </div>
        </li>
      </ul>
    }
  </section>
}
@if (loadData.areImagesLoaded && numOfRows) {
  <ul @scaleIn class="tier-list-body">
    @for (row of array(numOfRows); track $index; let rowIndex = $index) {
      <li class="tier-list-row">
        <div class="tier-list-rank" [style.backgroundColor]="backgroundColors[rowIndex]">
          <span>{{tiers[rowIndex]}}</span>
        </div>
        <ul #firstRow class="tier-list-items" dndDropzone [dndDisableIf]="draggedFromRow == rowIndex" [dndHorizontal]="true" (dndDrop)="onDrop($event, rowIndex)">
          @for (item of tierData[rowIndex]; track item; let index = $index) {
            <li [matTooltip]="getTooltip(rowIndex, index)" matTooltipPosition="above" matTooltipShowDelay="500" class="tier-list-item not-filler" [dndDraggable]="tierData[rowIndex][index]" dndType="transfer" (dndStart)="onDragStart(rowIndex, index)" [dndDisableDragIf]="finished">
              <img class="added" [src]="tierData[rowIndex][index]" alt="">
            </li>
          }
          <li class="placeholder" dndPlaceholderRef>
            <img [src]="tierlistItems[currentPlaceholder].file_path" alt="">
          </li>
          @if (rowIndex == 0) {
            <li [style.display]="showFiller[rowIndex]" [style.opacity]="calculateMaxItems(firstRow.offsetWidth, rowIndex)" class="tier-list-item filler" [@shrink]="finished ? 'shrink' : 'initial' "></li>
          } @else {
            <li [style.display]="showFiller[rowIndex]" class="tier-list-item filler" [@shrink]="finished ? 'shrink' : 'initial' "></li>
          }
        </ul>
      </li>
    }
  </ul>
  @if (placedAll) {
    <div class="btn-container">
      <button (click)="finish()" class="submit">Submit</button>
    </div>
  }
}
@if (!loadData.areImagesLoaded) {
  <mat-progress-spinner diameter="48" mode="indeterminate"></mat-progress-spinner>
}